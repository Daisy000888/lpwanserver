<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Architecture · LPWAN Server</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The **LPWAN Server** is meant to be a flexible wrapper around the numerous IoT"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Architecture · LPWAN Server"/><meta property="og:type" content="website"/><meta property="og:url" content="https://cablelabs.github.io/"/><meta property="og:description" content="The **LPWAN Server** is meant to be a flexible wrapper around the numerous IoT"/><meta property="og:image" content="https://cablelabs.github.io/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://cablelabs.github.io/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-24446455-9', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">LPWAN Server</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/overview/overview" target="_self">About</a></li><li class=""><a href="/docs/guides/getting-started" target="_self">Docs</a></li><li class=""><a href="/rest-api" target="_self">API</a></li><li class=""><a href="https://forum.lpwanserver.com" target="_self">Forum</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>About</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">About</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/features">Features</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/overview/architecture">Architecture</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Architecture</h1></header><article><div><span><p>The <strong>LPWAN Server</strong> is meant to be a flexible wrapper around the numerous IoT
data delivery networks.  To enable this flexibility, parts of the system
support a plug-in architecture that allows for future expansion.  In some cases,
these expansion areas correspond with others (e.g., UI support for entering
custom data for a network).</p>
<p>The Application Vendor uses the UI to interact with the system.  The UI uses
the REST API of the REST Server to access and update data.  The REST Server
then communicates with the remote network via the Internet.  The remote
networks pass data back, and the data is passed to the Reporting Protocols that
send the data back to the Application Vendor's server(s).</p>
<h2><a class="anchor" aria-hidden="true" id="points-of-customization"></a><a href="#points-of-customization" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Points of Customization</h2>
<p>Note that there are four points of system customization:</p>
<ul>
<li><p><strong>Network Protocols</strong> - Each remote network may have a unique API that the
REST Server uses.  Some of these remote networks may also share APIs.  New
Network Protocols can be added to support new APIs as new servers join the
LPWAN Server ecosystem.</p></li>
<li><p><strong>Reporting Protocols</strong> - Application vendors will receive data from the REST
Server.  The mechanism of sending what data can be customized on a per-application level.</p></li>
<li><p><strong>Database Adapters</strong> - LPWAN Server uses <a href="https://prisma.io">Prisma</a> for the database layer.
Prisma currently supports a few different databases, with many on the roadmap.
LPWAN Server uses Postgresql as the default, but with simple modifications,
LPWAN Server can be deployed with any database supported by Prisma.</p></li>
<li><p><strong>UI Customizations</strong> - UI customizations can be made so data specific to a
network type can have a unique user interface.  For example, LoRa networks
identify devices using an 8 byte binary value known as a DevEUI, where an
NB-IoT network may use an IMEI, such as the one used by a mobile phone.  This
data is known to and used by the Network Protocols and passed to the remote
networks.  Currently deployed with the software:</p>
<ul>
<li><strong>LoRa</strong> - Specifies the data specific to the networks supporting the LoRa
protocols.</li>
<li><strong>IP</strong> - Supports a UI specific for IP-based devices.</li>
<li><strong>Default</strong> - A general purpose data specification format, where data is
specified in the expected internal JSON format for the network type.  This
code is a last resort UI, for when the network-specific UIs are not
available.  The Default UI should not be seen in a production system.</li>
</ul></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="the-data-model"></a><a href="#the-data-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Data Model</h2>
<p>The <strong>LPWAN Server</strong> data model is meant to be a general model that can
represent the data of many remote networks, while providing significant
customization for each type of network.  The following outlines the basic
elements of the system and how they interact:</p>
<h3><a class="anchor" aria-hidden="true" id="public-data"></a><a href="#public-data" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Public Data</h3>
<ul>
<li><p><strong>Users</strong> -  Usernames and passwords to log in to
the system.  Users can be &quot;Admin&quot;, which gives them global rights to
access and modify records.  Normal users have permission to access
and modify data that they've created.</p></li>
<li><p><strong>Applications</strong> - The functional grouping of Devices that all serve
essentially the same purpose, reporting the data back to a remote server.
Applications report the data collected from Devices to some network server
using a ReportingProtocol.</p></li>
<li><p><strong>Devices</strong> - The devices that collect and report data back to the
application.  Devices often communicate via a specific NetworkType, though
multiple NetworkTypes could be supported if the Device has the necessary
hardware.  Device settings are generally specified by a DeviceProfile.</p></li>
<li><p><strong>DeviceProfiles</strong> - A collection of settings for Devices for a particular
NetworkType.  If a Device supports multiple NetworkTypes, each will use a
different DeviceProfile.</p></li>
<li><p><strong>Networks</strong> - The remote networks that the LPWAN Server uses to configure and
access data from Devices.  A Network has a base URL for communications with
the Network, a NetworkType, basically defining the data that is relevant to
the Network, and a NetworkProtocol that defines the API used to communicate
with the Network.  In addition, the Network includes data that is used to
validate access with the remote network, which is defined by the NetworkType.</p></li>
<li><p><strong>NetworkTypes</strong> - A way of collecting Networks into a common data
configuration scheme.  When provisioning Applications, Devices, or
DeviceProfiles via the UI, the NetworkType selection enables custom UI
elements that allow for providing this data.  To allow the database to
store this potential varying data, it is placed into the record as a JSON
object string.  When communicating with the REST interface, this data can be
found in the Network, ApplicationNetworkTypeLink,
DeviceNetworkTypeLink and DeviceProfile records.  It is left to the caller of
the REST API to provide the data expected for each NetworkType.  This data is
consumed by the NetworkProtocol for a Network to provision the remote network.</p></li>
<li><p><strong>NetworkProtocols</strong> - The software that handles communicating with a remote
network using its API.  A NetworkProtocol is coded to take the data defined
by a particular NetworkType, and pass that data and other local data to the
remote network in order to configure that network's companies (optional),
applications, and devices.  The system is designed to allow for the addition
of new NetworkProtocols by adding the code to the system that supports the
defined Javascript API and configuring the mapping of a name to that protocol
via the NetworkProtocol table.</p></li>
<li><p><strong>ReportingProtocols</strong> - The software that sends collected device data to the
server specified in the Application record via some defined API.  The system
is designed to allow for the addition of new ReportingProtocols by adding the
code to the system that supports the defined Javascript API and configuring
the mapping of a name to that protocol via the ReportingProtocol table.</p></li>
<li><p><strong>ApplicationNetworkTypeLinks</strong> - Links basic application data defined in
Applications to a specific NetworkType, and includes the custom data for that
NetworkType.  Creation of an ApplicationNetworkTypeLink causes the system to
call the NetworkProtocol for the remote networks of that type, provisioning
the application data on the remote system.</p></li>
<li><p><strong>DeviceNetworkTypeLinks</strong> - Links basic device data defined in Devices to a
specific NetworkType, and includes the custom data for that NetworkType.
Creation of a DeviceNetworkTypeLink causes the system to call the
NetworkProtocol for the remote networks of that type, provisioning the device
data on the remote system.</p></li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/overview/features"><span class="arrow-prev">← </span><span>Features</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#points-of-customization">Points of Customization</a></li><li><a href="#the-data-model">The Data Model</a><ul class="toc-headings"><li><a href="#public-data">Public Data</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/favicon.png" alt="LPWAN Server" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/guides/getting-started">Getting Started</a><a href="/rest-api">API Reference</a></div><div><h5>Community</h5><a href="https://forum.lpwanserver.com" target="_blank" rel="noreferrer noopener">Forum</a></div><div><h5>More</h5><a href="https://github.com/cablelabs/lpwanserver">GitHub</a><a class="github-button" href="https://github.com/cablelabs/lpwanserver" data-icon="octicon-star" data-count-href="/cablelabs/lpwanserver/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/cablelabs_logo_white.png"/></a><section class="copyright">Copyright © 2019 CableLabs</section></footer></div></body></html>